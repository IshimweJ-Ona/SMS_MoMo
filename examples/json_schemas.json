{
  "description": "JSON Data Modeling for MoMo SMS Analyzer - Complete schemas and examples for all database entities",
  "version": "1.0",
  "entities": {
    "users": {
      "description": "User entity representing senders and receivers in transactions",
      "schema": {
        "user_id": "integer (primary key)",
        "full_name": "string (max 100 chars)",
        "phone_number": "string (10-15 chars, unique)",
        "created_at": "datetime (ISO 8601 format)"
      },
      "examples": [
        {
          "user_id": 1,
          "full_name": "Alice Johnson",
          "phone_number": "0788110381",
          "created_at": "2026-01-20T10:15:00Z"
        },
        {
          "user_id": 2,
          "full_name": "Jean Pierre",
          "phone_number": "0783945743",
          "created_at": "2026-01-20T10:16:00Z"
        },
        {
          "user_id": 3,
          "full_name": "Olivier Mugisha",
          "phone_number": "0795798420",
          "created_at": "2026-01-20T10:17:00Z"
        }
      ]
    },
    "transaction_categories": {
      "description": "Transaction category entity for classifying transaction types",
      "schema": {
        "category_id": "integer (primary key)",
        "category_name": "string (max 50 chars, unique)",
        "description": "string (text)",
        "is_active": "boolean",
        "created_at": "datetime (ISO 8601 format)"
      },
      "examples": [
        {
          "category_id": 1,
          "category_name": "Send Money",
          "description": "Peer to peer money transfer",
          "is_active": true,
          "created_at": "2026-01-20T10:00:00Z"
        },
        {
          "category_id": 2,
          "category_name": "Withdraw",
          "description": "Cash withdrawal",
          "is_active": true,
          "created_at": "2026-01-20T10:00:00Z"
        },
        {
          "category_id": 3,
          "category_name": "Deposit",
          "description": "Incoming funds",
          "is_active": true,
          "created_at": "2026-01-20T10:00:00Z"
        },
        {
          "category_id": 4,
          "category_name": "Airtime",
          "description": "Airtime purchase",
          "is_active": true,
          "created_at": "2026-01-20T10:00:00Z"
        },
        {
          "category_id": 5,
          "category_name": "Merchant Payment",
          "description": "Payment to merchant",
          "is_active": true,
          "created_at": "2026-01-20T10:00:00Z"
        }
      ]
    },
    "tags": {
      "description": "Tag entity for flexible transaction labeling and analytics",
      "schema": {
        "tag_id": "integer (primary key)",
        "tag_name": "string (max 50 chars, unique)"
      },
      "examples": [
        {
          "tag_id": 1,
          "tag_name": "High_value"
        },
        {
          "tag_id": 2,
          "tag_name": "Low_value"
        },
        {
          "tag_id": 3,
          "tag_name": "Suspicious"
        },
        {
          "tag_id": 4,
          "tag_name": "Personal"
        },
        {
          "tag_id": 5,
          "tag_name": "Business"
        }
      ]
    },
    "system_logs": {
      "description": "System log entity for tracking ETL processes and system events",
      "schema": {
        "log_id": "integer (primary key)",
        "event_type": "string (INFO, WARNING, ERROR)",
        "message": "string (text)",
        "event_time": "datetime (ISO 8601 format)",
        "source": "string (ETL module or System component)",
        "related_entity": "string (ID of related entity - transaction_id, user_id, etc.)"
      },
      "examples": [
        {
          "log_id": 1,
          "event_type": "INFO",
          "message": "Transaction TXN1001 inserted successfully",
          "event_time": "2026-01-21T09:30:00Z",
          "source": "ETL Parser",
          "related_entity": "TXN1001"
        },
        {
          "log_id": 2,
          "event_type": "WARNING",
          "message": "Pending transaction detected - requires validation",
          "event_time": "2026-01-21T09:35:00Z",
          "source": "ETL Validator",
          "related_entity": "TXN1004"
        },
        {
          "log_id": 3,
          "event_type": "ERROR",
          "message": "Invalid SMS format skipped - missing transaction_id",
          "event_time": "2026-01-21T09:40:00Z",
          "source": "ETL Parser",
          "related_entity": null
        }
      ]
    },
    "transactions": {
      "description": "Transaction entity - main entity storing SMS transaction records",
      "simple_example": {
        "transaction_id": "TXN1001",
        "amount": 5000.00,
        "currency": "RWF",
        "status": "completed",
        "transaction_date": "2026-01-21T10:00:00Z"
      },
      "complex_example": {
        "transaction_id": "TXN1001",
        "financial_transaction_id": "FIN001",
        "external_transaction_id": "EXT001",
        "token_number": "TK001",
        "transaction_date": "2026-01-21T10:00:00Z",
        "sms_received_at": "2026-01-21T10:00:15Z",
        "amount": 5000.00,
        "fee": 100.00,
        "balance_after": 15000.00,
        "currency": "RWF",
        "status": "completed",
        "transaction_channel": "SMS",
        "service_center_number": "2020",
        "message_from_sender": "You sent 5000 RWF to Jean Pierre",
        "message_to_receiver": "You received 5000 RWF from Alice Johnson",
        "raw_sms": "You sent 5000 RWF to Jean Pierre. Ref: FIN001. Balance: 15000 RWF",
        "created_at": "2026-01-21T10:00:20Z",
        "updated_at": "2026-01-21T10:00:20Z",
        "sender": {
          "user_id": 1,
          "full_name": "Alice Johnson",
          "phone_number": "0788110381",
          "created_at": "2026-01-20T10:15:00Z"
        },
        "receiver": {
          "user_id": 2,
          "full_name": "Jean Pierre",
          "phone_number": "0783945743",
          "created_at": "2026-01-20T10:16:00Z"
        },
        "category": {
          "category_id": 1,
          "category_name": "Send Money",
          "description": "Peer to peer money transfer",
          "is_active": true,
          "created_at": "2026-01-20T10:00:00Z"
        },
        "tags": [
          {
            "tag_id": 1,
            "tag_name": "High_value"
          },
          {
            "tag_id": 4,
            "tag_name": "Personal"
          }
        ],
        "system_logs": [
          {
            "log_id": 1,
            "event_type": "INFO",
            "message": "Transaction TXN1001 inserted successfully",
            "event_time": "2026-01-21T09:30:00Z",
            "source": "ETL Parser",
            "related_entity": "TXN1001"
          }
        ]
      },
      "additional_examples": [
        {
          "transaction_id": "TXN1002",
          "transaction_date": "2026-01-21T11:00:00Z",
          "amount": 2000.00,
          "fee": 50.00,
          "currency": "RWF",
          "status": "completed",
          "transaction_channel": "APP",
          "sender": {
            "user_id": 2,
            "full_name": "Jean Pierre",
            "phone_number": "0783945743"
          },
          "receiver": {
            "user_id": 3,
            "full_name": "Olivier Mugisha",
            "phone_number": "0795798420"
          },
          "category": {
            "category_id": 4,
            "category_name": "Airtime",
            "description": "Airtime purchase"
          },
          "tags": [
            {
              "tag_id": 2,
              "tag_name": "Low_value"
            }
          ]
        },
        {
          "transaction_id": "TXN1003",
          "transaction_date": "2026-01-21T12:00:00Z",
          "amount": 10000.00,
          "fee": 0.00,
          "currency": "RWF",
          "status": "completed",
          "transaction_channel": "USSD",
          "sender": {
            "user_id": 3,
            "full_name": "Olivier Mugisha",
            "phone_number": "0795798420"
          },
          "receiver": {
            "user_id": 1,
            "full_name": "Alice Johnson",
            "phone_number": "0788110381"
          },
          "category": {
            "category_id": 3,
            "category_name": "Deposit",
            "description": "Incoming funds"
          },
          "tags": [
            {
              "tag_id": 1,
              "tag_name": "High_value"
            },
            {
              "tag_id": 4,
              "tag_name": "Personal"
            }
          ]
        }
      ]
    },
    "api_response_examples": {
      "description": "Example API responses showing how relational data is serialized",
      "get_transaction_by_id": {
        "endpoint": "GET /api/transactions/TXN1001",
        "response": {
          "success": true,
          "data": {
            "transaction_id": "TXN1001",
            "transaction_date": "2026-01-21T10:00:00Z",
            "amount": 5000.00,
            "fee": 100.00,
            "balance_after": 15000.00,
            "currency": "RWF",
            "status": "completed",
            "transaction_channel": "SMS",
            "sender": {
              "user_id": 1,
              "full_name": "Alice Johnson",
              "phone_number": "0788110381"
            },
            "receiver": {
              "user_id": 2,
              "full_name": "Jean Pierre",
              "phone_number": "0783945743"
            },
            "category": {
              "category_id": 1,
              "category_name": "Send Money",
              "description": "Peer to peer money transfer"
            },
            "tags": [
              {
                "tag_id": 1,
                "tag_name": "High_value"
              },
              {
                "tag_id": 4,
                "tag_name": "Personal"
              }
            ]
          }
        }
      },
      "get_transactions_list": {
        "endpoint": "GET /api/transactions?limit=10&offset=0",
        "response": {
          "success": true,
          "count": 5,
          "data": [
            {
              "transaction_id": "TXN1001",
              "transaction_date": "2026-01-21T10:00:00Z",
              "amount": 5000.00,
              "currency": "RWF",
              "status": "completed",
              "sender": {
                "user_id": 1,
                "full_name": "Alice Johnson"
              },
              "receiver": {
                "user_id": 2,
                "full_name": "Jean Pierre"
              },
              "category": {
                "category_name": "Send Money"
              }
            }
          ]
        }
      },
      "get_user_transactions": {
        "endpoint": "GET /api/users/1/transactions",
        "response": {
          "success": true,
          "user": {
            "user_id": 1,
            "full_name": "Alice Johnson",
            "phone_number": "0788110381"
          },
          "transactions": [
            {
              "transaction_id": "TXN1001",
              "transaction_date": "2026-01-21T10:00:00Z",
              "amount": 5000.00,
              "status": "completed",
              "category": {
                "category_name": "Send Money"
              }
            }
          ]
        }
      }
    }
  }
}
